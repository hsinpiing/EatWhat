const TRANSLATIONS = {
  'zh-TW': {
    'firstVisit.title': 'å°æé†’',
    'firstVisit.body': 'ä½ çš„é»‘åå–®å’Œæ­·å²ç´€éŒ„å„²å­˜åœ¨é€™å°è¨­å‚™çš„ç€è¦½å™¨è£¡ã€‚æ›è¨­å‚™æˆ–æ¸…é™¤ç€è¦½å™¨è³‡æ–™ï¼Œç´€éŒ„å°±æœƒæ¶ˆå¤±å–”ï¼',
    'firstVisit.ok': 'æˆ‘çŸ¥é“äº†',
    'settings.title': 'è¨­å®š',
    'settings.language': 'èªžè¨€',
    'settings.clearHistory': 'æ¸…é™¤æ­·å²ç´€éŒ„',
    'settings.clearBlacklist': 'æ¸…é™¤é»‘åå–®',
    'settings.bmc': 'å–œæ­¡åƒå•¥å—Žï¼Ÿè«‹ä½œè€…å–æ¯é£²æ–™',
    'settings.about': 'åƒå•¥ EatWhat v1.0 Â· å‘·è¦ç±³',
    'home.locationPlaceholder': 'è¼¸å…¥åœ°å€æˆ–åœ°æ¨™...',
    'home.gps': 'è‡ªå‹•å®šä½',
    'home.cta': 'å¹«æˆ‘æ±ºå®šåƒä»€éº¼ï¼',
    'home.bmc': 'å–œæ­¡åƒå•¥ï¼Ÿè«‹ä½œè€…å–æ¯é£²æ–™',
    'home.filterTitle': 'å‘Šè¨´æˆ‘æ›´å¤šï¼ˆå¯ä¸é¸ï¼‰',
    'home.resultsTitle': 'âœ¨ ä»Šå¤©åƒé€™äº›å§ï¼',
    'home.retry': 'æ›å…©å®¶è©¦è©¦çœ‹',
    'filter.people': 'ðŸ‘¥ å¹¾å€‹äººåƒï¼Ÿ',
    'filter.solo': 'ä¸€äºº',
    'filter.two': 'å…©äºº',
    'filter.group': 'å¤šäºº',
    'filter.occasion': 'ðŸŽ­ ä»€éº¼å ´åˆï¼Ÿ',
    'filter.business': 'å•†å‹™æœƒè­°',
    'filter.friends': 'æœ‹å‹èšæœƒ',
    'filter.family': 'å®¶åº­èšé¤',
    'filter.date': 'ç´„æœƒ',
    'filter.anniversary': 'é€±å¹´ç´€å¿µ',
    'filter.foodType': 'ðŸ½ï¸ æƒ³åƒä»€éº¼ï¼Ÿ',
    'filter.price': 'ðŸ’° é ç®—ï¼Ÿ',
    'filter.distance': 'ðŸ“ è·é›¢ï¼Ÿ',
    'filter.sort': 'â­ æŽ¨è–¦æ–¹å¼ï¼Ÿ',
    'filter.dietary': 'ðŸ¥— é£²é£Ÿéœ€æ±‚ï¼Ÿ',
    'food.chinese': 'ä¸­å¼', 'food.japanese': 'æ—¥å¼', 'food.korean': 'éŸ“å¼',
    'food.western': 'è¥¿å¼', 'food.southeast': 'æ±å—äºž', 'food.international': 'ç•°åœ‹æ–™ç†',
    'food.bbq': 'ç‡’çƒ¤', 'food.hotpot': 'ç«é‹', 'food.vegetarian': 'ç´ é£Ÿ',
    'food.brunch': 'æ—©åˆé¤', 'food.dessert': 'ç”œé»ž', 'food.cafe': 'å’–å•¡å»³',
    'food.bubbletea': 'å¥¶èŒ¶', 'food.bar': 'é…’å§', 'food.other': 'å…¶ä»–',
    'dist.walk5': 'æ­¥è¡Œ 5 åˆ†', 'dist.walk15': 'æ­¥è¡Œ 15 åˆ†', 'dist.drive10': 'é–‹è»Š 10 åˆ†',
    'sort.weighted': 'é«˜åˆ†å„ªå…ˆ', 'sort.random': 'ç´”éš¨æ©Ÿ ðŸŽ²',
    'dietary.nopork': 'ç„¡è±¬è‚‰', 'dietary.veg': 'ç´ é£Ÿ', 'dietary.vegan': 'ç´”ç´ ',
    'dietary.kid': 'å…’ç«¥å‹å–„', 'dietary.pet': 'å¯µç‰©å‹å–„', 'dietary.accessible': 'ç„¡éšœç¤™',
    'nav.home': 'é¦–é ', 'nav.history': 'è¶³è·¡', 'nav.blacklist': 'é»‘åå–®',
    'history.title': 'ðŸ—“ï¸ æˆ‘çš„è¶³è·¡', 'history.share': 'åˆ†äº«æœˆå ±',
    'history.stats': 'ðŸ“Š æœ¬æœˆçµ±è¨ˆ', 'history.empty': 'é‚„æ²’æœ‰ç´€éŒ„ï¼Œå¿«åŽ»æŽ¢ç´¢å§ï¼',
    'blacklist.title': 'ðŸš« é»‘åå–®',
    'blacklist.clearAll': 'æ¸…ç©ºå…¨éƒ¨é»‘åå–®',
    'blacklist.empty': 'é»‘åå–®æ˜¯ç©ºçš„ï¼Œç¹¼çºŒæŽ¢ç´¢å§ï¼',
    'error.noResults': 'æ¢ä»¶å¤ªåš´æ ¼ï¼Œé™„è¿‘æ‰¾ä¸åˆ°é¤å»³ï¼Œè¦æ”¾å¯¬ä¸€ä¸‹æ¢ä»¶å—Žï¼Ÿ',
    'error.network': 'ðŸ˜…ã€Œåƒå•¥ã€æ‰¾ä¸åˆ°é™„è¿‘çš„åº—äº†ï¼Œè«‹æª¢æŸ¥ç¶²è·¯é€£ç·šå¾Œå†è©¦è©¦',
    'error.location': 'ðŸ“ æ‰¾ä¸åˆ°ä½ åœ¨å“ªè£¡è€¶... è«‹è¼¸å…¥åœ°å€æˆ–é–‹å•Ÿå®šä½æ¬Šé™',
    'error.relax': 'æ”¾å¯¬æ¢ä»¶', 'error.refresh': 'é‡æ–°æ•´ç†',
    'card.visited': 'åŽ»éŽ {n} æ¬¡', 'card.firstTime': 'é¦–æ¬¡æŽ¨è–¦',
    'card.go': 'å¸¶æˆ‘åŽ»', 'card.share': 'åˆ†äº«', 'card.pick': 'å°±é€™å®¶ï¼', 'card.ban': 'ä¸æƒ³åŽ»',
    'stats.visits': 'ç”¨äº†åƒå•¥ {n} æ¬¡',
    'stats.visits.label': 'ç”¨äº†åƒå•¥',
    'stats.visits.unit': 'æ¬¡',
    'stats.types': 'æŽ¢ç´¢äº† {n} ç¨®æ–™ç†',
    'stats.types.label': 'æŽ¢ç´¢äº†',
    'stats.types.unit': 'ç¨®æ–™ç†',
    'stats.top': 'æœ€æ„›ï¼š{emoji}ï¼ˆ{n}æ¬¡ï¼‰',
    'stats.top.label': 'æœ€æ„›',
    'toast.copied.image': 'ðŸ“‹ å·²è¤‡è£½ï¼å¯ç›´æŽ¥è²¼åˆ° IGã€Line ç­‰',
    'toast.saved.image': 'ðŸ“¥ å·²å„²å­˜åœ–ç‰‡ï¼',
    'confirm.clearHistory': 'ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰æ­·å²ç´€éŒ„å—Žï¼Ÿ',
    'confirm.clearBlacklist': 'ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰é»‘åå–®å—Žï¼Ÿ',
    'confirm.clearAllBlacklist': 'ç¢ºå®šè¦æ¸…ç©ºå…¨éƒ¨é»‘åå–®å—Žï¼Ÿ',
    'toast.added': 'âœ… å·²åŠ å…¥æ­·å²ç´€éŒ„ï¼',
    'toast.banned': 'ðŸš« å·²åŠ å…¥é»‘åå–®',
    'toast.removed': 'âœ… å·²å¾žé»‘åå–®ç§»é™¤',
    'toast.cleared': 'âœ… å·²æ¸…é™¤å®Œæˆ',
    'toast.copied': 'å·²è¤‡è£½é€£çµï¼',
    'blacklist.remove': 'ç§»é™¤',
    'loading': 'æ‰¾é¤å»³ä¸­...',
  },
  'zh-CN': {
    'firstVisit.title': 'å°æç¤º',
    'firstVisit.body': 'ä½ çš„é»‘åå•å’ŒåŽ†å²è®°å½•å‚¨å­˜åœ¨è¿™å°è®¾å¤‡çš„æµè§ˆå™¨é‡Œã€‚æ¢è®¾å¤‡æˆ–æ¸…é™¤æµè§ˆå™¨æ•°æ®ï¼Œè®°å½•å°±ä¼šæ¶ˆå¤±ï¼',
    'firstVisit.ok': 'æˆ‘çŸ¥é“äº†',
    'settings.title': 'è®¾ç½®',
    'settings.language': 'è¯­è¨€',
    'settings.clearHistory': 'æ¸…é™¤åŽ†å²è®°å½•',
    'settings.clearBlacklist': 'æ¸…é™¤é»‘åå•',
    'settings.bmc': 'å–œæ¬¢åƒå•¥å—ï¼Ÿè¯·ä½œè€…å–æ¯é¥®æ–™',
    'settings.about': 'åƒå•¥ EatWhat v1.0 Â· å‘·è¦ç±³',
    'home.locationPlaceholder': 'è¾“å…¥åœ°å€æˆ–åœ°æ ‡...',
    'home.gps': 'è‡ªåŠ¨å®šä½',
    'home.cta': 'å¸®æˆ‘å†³å®šåƒä»€ä¹ˆï¼',
    'home.bmc': 'å–œæ¬¢åƒå•¥ï¼Ÿè¯·ä½œè€…å–æ¯é¥®æ–™',
    'home.filterTitle': 'å‘Šè¯‰æˆ‘æ›´å¤šï¼ˆå¯ä¸é€‰ï¼‰',
    'home.resultsTitle': 'âœ¨ ä»Šå¤©åƒè¿™äº›å§ï¼',
    'home.retry': 'æ¢ä¸¤å®¶è¯•è¯•çœ‹',
    'filter.people': 'ðŸ‘¥ å‡ ä¸ªäººåƒï¼Ÿ',
    'filter.solo': 'ä¸€äºº', 'filter.two': 'ä¸¤äºº', 'filter.group': 'å¤šäºº',
    'filter.occasion': 'ðŸŽ­ ä»€ä¹ˆåœºåˆï¼Ÿ',
    'filter.business': 'å•†åŠ¡ä¼šè®®', 'filter.friends': 'æœ‹å‹èšä¼š',
    'filter.family': 'å®¶åº­èšé¤', 'filter.date': 'çº¦ä¼š', 'filter.anniversary': 'å‘¨å¹´çºªå¿µ',
    'filter.foodType': 'ðŸ½ï¸ æƒ³åƒä»€ä¹ˆï¼Ÿ',
    'filter.price': 'ðŸ’° é¢„ç®—ï¼Ÿ', 'filter.distance': 'ðŸ“ è·ç¦»ï¼Ÿ',
    'filter.sort': 'â­ æŽ¨èæ–¹å¼ï¼Ÿ', 'filter.dietary': 'ðŸ¥— é¥®é£Ÿéœ€æ±‚ï¼Ÿ',
    'food.chinese': 'ä¸­å¼', 'food.japanese': 'æ—¥å¼', 'food.korean': 'éŸ©å¼',
    'food.western': 'è¥¿å¼', 'food.southeast': 'ä¸œå—äºš', 'food.international': 'å¼‚å›½æ–™ç†',
    'food.bbq': 'çƒ§çƒ¤', 'food.hotpot': 'ç«é”…', 'food.vegetarian': 'ç´ é£Ÿ',
    'food.brunch': 'æ—©åˆé¤', 'food.dessert': 'ç”œç‚¹', 'food.cafe': 'å’–å•¡åŽ…',
    'food.bubbletea': 'å¥¶èŒ¶', 'food.bar': 'é…’å§', 'food.other': 'å…¶ä»–',
    'dist.walk5': 'æ­¥è¡Œ 5 åˆ†', 'dist.walk15': 'æ­¥è¡Œ 15 åˆ†', 'dist.drive10': 'å¼€è½¦ 10 åˆ†',
    'sort.weighted': 'é«˜åˆ†ä¼˜å…ˆ', 'sort.random': 'çº¯éšæœº ðŸŽ²',
    'dietary.nopork': 'æ— çŒªè‚‰', 'dietary.veg': 'ç´ é£Ÿ', 'dietary.vegan': 'çº¯ç´ ',
    'dietary.kid': 'å„¿ç«¥å‹å–„', 'dietary.pet': 'å® ç‰©å‹å–„', 'dietary.accessible': 'æ— éšœç¢',
    'nav.home': 'é¦–é¡µ', 'nav.history': 'è¶³è¿¹', 'nav.blacklist': 'é»‘åå•',
    'history.title': 'ðŸ—“ï¸ æˆ‘çš„è¶³è¿¹', 'history.share': 'åˆ†äº«æœˆæŠ¥',
    'history.stats': 'ðŸ“Š æœ¬æœˆç»Ÿè®¡', 'history.empty': 'è¿˜æ²¡æœ‰è®°å½•ï¼Œå¿«åŽ»æŽ¢ç´¢å§ï¼',
    'blacklist.title': 'ðŸš« é»‘åå•',
    'blacklist.clearAll': 'æ¸…ç©ºå…¨éƒ¨é»‘åå•',
    'blacklist.empty': 'é»‘åå•æ˜¯ç©ºçš„ï¼Œç»§ç»­æŽ¢ç´¢å§ï¼',
    'error.noResults': 'æ¡ä»¶å¤ªä¸¥æ ¼ï¼Œé™„è¿‘æ‰¾ä¸åˆ°é¤åŽ…ï¼Œè¦æ”¾å®½ä¸€ä¸‹æ¡ä»¶å—ï¼Ÿ',
    'error.network': 'ðŸ˜…ã€Œåƒå•¥ã€æ‰¾ä¸åˆ°é™„è¿‘çš„åº—äº†ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿žæŽ¥åŽå†è¯•è¯•',
    'error.location': 'ðŸ“ æ‰¾ä¸åˆ°ä½ åœ¨å“ªé‡Œè€¶... è¯·è¾“å…¥åœ°å€æˆ–å¼€å¯å®šä½æƒé™',
    'error.relax': 'æ”¾å®½æ¡ä»¶', 'error.refresh': 'é‡æ–°æ•´ç†',
    'card.visited': 'åŽ»è¿‡ {n} æ¬¡', 'card.firstTime': 'é¦–æ¬¡æŽ¨è',
    'card.go': 'å¸¦æˆ‘åŽ»', 'card.share': 'åˆ†äº«', 'card.pick': 'å°±è¿™å®¶ï¼', 'card.ban': 'ä¸æƒ³åŽ»',
    'stats.visits': 'ç”¨äº†åƒå•¥ {n} æ¬¡',
    'stats.visits.label': 'ç”¨äº†åƒå•¥',
    'stats.visits.unit': 'æ¬¡',
    'stats.types': 'æŽ¢ç´¢äº† {n} ç§æ–™ç†',
    'stats.types.label': 'æŽ¢ç´¢äº†',
    'stats.types.unit': 'ç§æ–™ç†',
    'stats.top': 'æœ€çˆ±ï¼š{emoji}ï¼ˆ{n}æ¬¡ï¼‰',
    'stats.top.label': 'æœ€çˆ±',
    'toast.copied.image': 'ðŸ“‹ å·²å¤åˆ¶ï¼å¯ç›´æŽ¥è´´åˆ° IGã€Line ç­‰',
    'toast.saved.image': 'ðŸ“¥ å·²ä¿å­˜å›¾ç‰‡ï¼',
    'confirm.clearHistory': 'ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰åŽ†å²è®°å½•å—ï¼Ÿ',
    'confirm.clearBlacklist': 'ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰é»‘åå•å—ï¼Ÿ',
    'confirm.clearAllBlacklist': 'ç¡®å®šè¦æ¸…ç©ºå…¨éƒ¨é»‘åå•å—ï¼Ÿ',
    'toast.added': 'âœ… å·²åŠ å…¥åŽ†å²è®°å½•ï¼',
    'toast.banned': 'ðŸš« å·²åŠ å…¥é»‘åå•',
    'toast.removed': 'âœ… å·²ä»Žé»‘åå•ç§»é™¤',
    'toast.cleared': 'âœ… å·²æ¸…é™¤å®Œæˆ',
    'toast.copied': 'å·²å¤åˆ¶é“¾æŽ¥ï¼',
    'blacklist.remove': 'ç§»é™¤',
    'loading': 'æ‰¾é¤åŽ…ä¸­...',
  },
  'en': {
    'firstVisit.title': 'Quick Note',
    'firstVisit.body': 'Your blacklist and history are stored in this browser. Switching devices or clearing browser data will erase your records.',
    'firstVisit.ok': 'Got it!',
    'settings.title': 'Settings',
    'settings.language': 'Language',
    'settings.clearHistory': 'Clear History',
    'settings.clearBlacklist': 'Clear Blacklist',
    'settings.bmc': 'Like EatWhat? Buy the creator a drink!',
    'settings.about': 'EatWhat v1.0 Â· å‘·è¦ç±³',
    'home.locationPlaceholder': 'Enter address or landmark...',
    'home.gps': 'Locate Me',
    'home.cta': 'Help me decide!',
    'home.bmc': 'Like EatWhat? Buy the creator a drink!',
    'home.filterTitle': 'Tell me more (optional)',
    'home.resultsTitle': "âœ¨ Today's picks!",
    'home.retry': 'Try 2 more',
    'filter.people': 'ðŸ‘¥ How many people?',
    'filter.solo': 'Solo', 'filter.two': '2 people', 'filter.group': 'Group',
    'filter.occasion': 'ðŸŽ­ Occasion?',
    'filter.business': 'Business', 'filter.friends': 'Friends',
    'filter.family': 'Family', 'filter.date': 'Date', 'filter.anniversary': 'Anniversary',
    'filter.foodType': 'ðŸ½ï¸ What to eat?',
    'filter.price': 'ðŸ’° Budget?', 'filter.distance': 'ðŸ“ Distance?',
    'filter.sort': 'â­ Sort by?', 'filter.dietary': 'ðŸ¥— Dietary needs?',
    'food.chinese': 'Chinese', 'food.japanese': 'Japanese', 'food.korean': 'Korean',
    'food.western': 'Western', 'food.southeast': 'Southeast Asian', 'food.international': 'International',
    'food.bbq': 'BBQ', 'food.hotpot': 'Hot Pot', 'food.vegetarian': 'Vegetarian',
    'food.brunch': 'Brunch', 'food.dessert': 'Dessert', 'food.cafe': 'Cafe',
    'food.bubbletea': 'Bubble Tea', 'food.bar': 'Bar', 'food.other': 'Other',
    'dist.walk5': '5 min walk', 'dist.walk15': '15 min walk', 'dist.drive10': '10 min drive',
    'sort.weighted': 'Top rated first', 'sort.random': 'Pure random ðŸŽ²',
    'dietary.nopork': 'Pork-free', 'dietary.veg': 'Vegetarian', 'dietary.vegan': 'Vegan',
    'dietary.kid': 'Kid-friendly', 'dietary.pet': 'Pet-friendly', 'dietary.accessible': 'Accessible',
    'nav.home': 'Home', 'nav.history': 'History', 'nav.blacklist': 'Blacklist',
    'history.title': 'ðŸ—“ï¸ My Food Journey', 'history.share': 'Share Report',
    'history.stats': 'ðŸ“Š Monthly Stats', 'history.empty': 'No records yet. Go explore!',
    'blacklist.title': 'ðŸš« Blacklist',
    'blacklist.clearAll': 'Clear all blacklist',
    'blacklist.empty': 'Blacklist is empty. Keep exploring!',
    'error.noResults': 'No restaurants found nearby. Try relaxing your filters?',
    'error.network': "ðŸ˜… Can't reach restaurants. Please check your connection.",
    'error.location': 'ðŸ“ Could not find your location. Please enter an address.',
    'error.relax': 'Relax filters', 'error.refresh': 'Refresh',
    'card.visited': 'Visited {n}x', 'card.firstTime': 'First time!',
    'card.go': 'Navigate', 'card.share': 'Share', 'card.pick': 'This one!', 'card.ban': 'Nope',
    'stats.visits': 'Used EatWhat {n} times',
    'stats.visits.label': 'Used EatWhat',
    'stats.visits.unit': 'times',
    'stats.types': 'Explored {n} cuisines',
    'stats.types.label': 'Explored',
    'stats.types.unit': 'cuisines',
    'stats.top': 'Fave: {emoji} ({n}x)',
    'stats.top.label': 'Fave',
    'toast.copied.image': 'ðŸ“‹ Copied! Paste anywhere.',
    'toast.saved.image': 'ðŸ“¥ Image saved!',
    'confirm.clearHistory': 'Clear all history?',
    'confirm.clearBlacklist': 'Clear all blacklist?',
    'confirm.clearAllBlacklist': 'Clear entire blacklist?',
    'toast.added': 'âœ… Added to history!',
    'toast.banned': 'ðŸš« Added to blacklist',
    'toast.removed': 'âœ… Removed from blacklist',
    'toast.cleared': 'âœ… Cleared!',
    'toast.copied': 'Link copied!',
    'blacklist.remove': 'Remove',
    'loading': 'Finding restaurants...',
  }
};

function t(key, vars = {}) {
  const lang = getCurrentLang();
  let str = (TRANSLATIONS[lang] && TRANSLATIONS[lang][key]) || TRANSLATIONS['zh-TW'][key] || key;
  Object.entries(vars).forEach(([k, v]) => { str = str.replace(`{${k}}`, v); });
  return str;
}

function getCurrentLang() {
  const s = JSON.parse(localStorage.getItem('eatwhat_settings') || '{}');
  if (s.language) return s.language;
  const nav = (navigator.language || 'en').toLowerCase();
  if (nav.startsWith('zh-tw') || nav.startsWith('zh-hant')) return 'zh-TW';
  if (nav.startsWith('zh')) return 'zh-CN';
  return 'en';
}

function setLanguage(lang) {
  const s = JSON.parse(localStorage.getItem('eatwhat_settings') || '{}');
  s.language = lang;
  localStorage.setItem('eatwhat_settings', JSON.stringify(s));
  applyI18n();
}

function applyI18n() {
  document.querySelectorAll('[data-i18n]').forEach(el => {
    el.textContent = t(el.dataset.i18n);
  });
  document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
    el.placeholder = t(el.dataset.i18nPlaceholder);
  });
}
